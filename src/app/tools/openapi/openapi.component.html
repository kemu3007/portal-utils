<div class="mt-3 container-fluid" id="viewer">
  <div class="row">
    <div class="col-md-8 border-end border-2">
      <h2 class="mb-0">OpenApi Viewer<app-tweet-btn class="ms-3"></app-tweet-btn></h2>
      <div class="mt-3">
        OpenApi JSON/YAMLをSwagger-UI / Redoc形式で表示します。<br />
        入力した値はローカルストレージにのみ記録され、サーバ等には記録していないため安心して利用可能です。
      </div>
      <hr />
      <form [formGroup]="form">
        <div class="mb-3">
          <label class="form-label">Spec Type</label><br />
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              name="isYaml"
              type="radio"
              id="yaml"
              formControlName="isYaml"
              [value]="true"
            />
            <label class="form-check-label" for="yaml">YAML</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              name="isYaml"
              type="radio"
              id="json"
              formControlName="isYaml"
              [value]="false"
            />
            <label class="form-check-label" for="json">JSON</label>
          </div>
          <br />
          <label for="openapi" class="form-label mt-3">OpenApi Spec</label>
          <textarea formControlName="openapi" class="form-control" rows="10"></textarea>
          <span class="text-danger" *ngIf="error">{{ error }}</span>
          <hr />
          <button matRipple class="btn btn-success mt-3 me-3" (click)="open(swaggerModal)">View On Swagger UI</button>
          <button matRipple class="btn btn-secondary mt-3" (click)="openRedoc(redocModal)">View On Redoc</button>
        </div>
      </form>
      <app-ads type="auto"></app-ads>
    </div>
    <div class="col-md-4 bg-light">
      <app-ads type="box" [count]="3"></app-ads>
    </div>
  </div>
</div>

<ng-template #swaggerModal let-modal>
  <div class="modal-header py-1 d-flex justify-content-between">
    <span>Swagger Viewer</span>
    <button class="btn btn-sm" (click)="close()">&times;</button>
  </div>
  <div class="modal-body">
    <div id="swagger"></div>
  </div>
</ng-template>

<ng-template #redocModal let-modal>
  <div class="modal-header py-1 d-flex justify-content-between">
    <span>Redoc Viewer</span>
    <button class="btn btn-sm" (click)="close()">&times;</button>
  </div>
  <div class="modal-body">
    <redoc id="redoc"></redoc>
  </div>
</ng-template>
